!function(t){var i=window.webpackHotUpdate;window.webpackHotUpdate=function(t,e){!function(t,i){if(!_[t]||!v[t])return;for(var e in v[t]=!1,i)Object.prototype.hasOwnProperty.call(i,e)&&(f[e]=i[e]);0==--m&&0===w&&D()}(t,e),i&&i(t,e)};var e,r=!0,s="8b93734a26b62408eec1",a=1e4,h={},n=[],o=[];function u(t){var i=k[t];if(!i)return I;var r=function(r){return i.hot.active?(k[r]?-1===k[r].parents.indexOf(t)&&k[r].parents.push(t):(n=[t],e=r),-1===i.children.indexOf(r)&&i.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+t),n=[]),I(r)},s=function(t){return{configurable:!0,enumerable:!0,get:function(){return I[t]},set:function(i){I[t]=i}}};for(var a in I)Object.prototype.hasOwnProperty.call(I,a)&&"e"!==a&&"t"!==a&&Object.defineProperty(r,a,s(a));return r.e=function(t){return"ready"===d&&g("prepare"),w++,I.e(t).then(i,function(t){throw i(),t});function i(){w--,"prepare"===d&&(x[t]||M(t),0===w&&0===m&&D())}},r.t=function(t,i){return 1&i&&(t=r(t)),I.t(t,-2&i)},r}function c(t){var i={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:e!==t,active:!0,accept:function(t,e){if(void 0===t)i._selfAccepted=!0;else if("function"==typeof t)i._selfAccepted=t;else if("object"==typeof t)for(var r=0;r<t.length;r++)i._acceptedDependencies[t[r]]=e||function(){};else i._acceptedDependencies[t]=e||function(){}},decline:function(t){if(void 0===t)i._selfDeclined=!0;else if("object"==typeof t)for(var e=0;e<t.length;e++)i._declinedDependencies[t[e]]=!0;else i._declinedDependencies[t]=!0},dispose:function(t){i._disposeHandlers.push(t)},addDisposeHandler:function(t){i._disposeHandlers.push(t)},removeDisposeHandler:function(t){var e=i._disposeHandlers.indexOf(t);e>=0&&i._disposeHandlers.splice(e,1)},check:P,apply:T,status:function(t){if(!t)return d;l.push(t)},addStatusHandler:function(t){l.push(t)},removeStatusHandler:function(t){var i=l.indexOf(t);i>=0&&l.splice(i,1)},data:h[t]};return e=void 0,i}var l=[],d="idle";function g(t){d=t;for(var i=0;i<l.length;i++)l[i].call(null,t)}var p,f,y,m=0,w=0,x={},v={},_={};function b(t){return+t+""===t?+t:t}function P(t){if("idle"!==d)throw new Error("check() is only allowed in idle status");return r=t,g("check"),(i=a,i=i||1e4,new Promise(function(t,e){if("undefined"==typeof XMLHttpRequest)return e(new Error("No browser support"));try{var r=new XMLHttpRequest,a=I.p+""+s+".hot-update.json";r.open("GET",a,!0),r.timeout=i,r.send(null)}catch(t){return e(t)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)e(new Error("Manifest request to "+a+" timed out."));else if(404===r.status)t();else if(200!==r.status&&304!==r.status)e(new Error("Manifest request to "+a+" failed."));else{try{var i=JSON.parse(r.responseText)}catch(t){return void e(t)}t(i)}}})).then(function(t){if(!t)return g("idle"),null;v={},x={},_=t.c,y=t.h,g("prepare");var i=new Promise(function(t,i){p={resolve:t,reject:i}});f={};return M(0),"prepare"===d&&0===w&&0===m&&D(),i});var i}function M(t){_[t]?(v[t]=!0,m++,function(t){var i=document.createElement("script");i.charset="utf-8",i.src=I.p+""+t+"."+s+".hot-update.js",document.head.appendChild(i)}(t)):x[t]=!0}function D(){g("ready");var t=p;if(p=null,t)if(r)Promise.resolve().then(function(){return T(r)}).then(function(i){t.resolve(i)},function(i){t.reject(i)});else{var i=[];for(var e in f)Object.prototype.hasOwnProperty.call(f,e)&&i.push(b(e));t.resolve(i)}}function T(i){if("ready"!==d)throw new Error("apply() is only allowed in ready status");var e,r,a,o,u;function c(t){for(var i=[t],e={},r=i.slice().map(function(t){return{chain:[t],id:t}});r.length>0;){var s=r.pop(),a=s.id,h=s.chain;if((o=k[a])&&!o.hot._selfAccepted){if(o.hot._selfDeclined)return{type:"self-declined",chain:h,moduleId:a};if(o.hot._main)return{type:"unaccepted",chain:h,moduleId:a};for(var n=0;n<o.parents.length;n++){var u=o.parents[n],c=k[u];if(c){if(c.hot._declinedDependencies[a])return{type:"declined",chain:h.concat([u]),moduleId:a,parentId:u};-1===i.indexOf(u)&&(c.hot._acceptedDependencies[a]?(e[u]||(e[u]=[]),l(e[u],[a])):(delete e[u],i.push(u),r.push({chain:h.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:t,outdatedModules:i,outdatedDependencies:e}}function l(t,i){for(var e=0;e<i.length;e++){var r=i[e];-1===t.indexOf(r)&&t.push(r)}}i=i||{};var p={},m=[],w={},x=function(){console.warn("[HMR] unexpected require("+P.moduleId+") to disposed module")};for(var v in f)if(Object.prototype.hasOwnProperty.call(f,v)){var P;u=b(v);var M=!1,D=!1,T=!1,j="";switch((P=f[v]?c(u):{type:"disposed",moduleId:v}).chain&&(j="\nUpdate propagation: "+P.chain.join(" -> ")),P.type){case"self-declined":i.onDeclined&&i.onDeclined(P),i.ignoreDeclined||(M=new Error("Aborted because of self decline: "+P.moduleId+j));break;case"declined":i.onDeclined&&i.onDeclined(P),i.ignoreDeclined||(M=new Error("Aborted because of declined dependency: "+P.moduleId+" in "+P.parentId+j));break;case"unaccepted":i.onUnaccepted&&i.onUnaccepted(P),i.ignoreUnaccepted||(M=new Error("Aborted because "+u+" is not accepted"+j));break;case"accepted":i.onAccepted&&i.onAccepted(P),D=!0;break;case"disposed":i.onDisposed&&i.onDisposed(P),T=!0;break;default:throw new Error("Unexception type "+P.type)}if(M)return g("abort"),Promise.reject(M);if(D)for(u in w[u]=f[u],l(m,P.outdatedModules),P.outdatedDependencies)Object.prototype.hasOwnProperty.call(P.outdatedDependencies,u)&&(p[u]||(p[u]=[]),l(p[u],P.outdatedDependencies[u]));T&&(l(m,[P.moduleId]),w[u]=x)}var E,O=[];for(r=0;r<m.length;r++)u=m[r],k[u]&&k[u].hot._selfAccepted&&O.push({module:u,errorHandler:k[u].hot._selfAccepted});g("dispose"),Object.keys(_).forEach(function(t){!1===_[t]&&function(t){delete installedChunks[t]}(t)});for(var C,R,S=m.slice();S.length>0;)if(u=S.pop(),o=k[u]){var B={},H=o.hot._disposeHandlers;for(a=0;a<H.length;a++)(e=H[a])(B);for(h[u]=B,o.hot.active=!1,delete k[u],delete p[u],a=0;a<o.children.length;a++){var A=k[o.children[a]];A&&((E=A.parents.indexOf(u))>=0&&A.parents.splice(E,1))}}for(u in p)if(Object.prototype.hasOwnProperty.call(p,u)&&(o=k[u]))for(R=p[u],a=0;a<R.length;a++)C=R[a],(E=o.children.indexOf(C))>=0&&o.children.splice(E,1);for(u in g("apply"),s=y,w)Object.prototype.hasOwnProperty.call(w,u)&&(t[u]=w[u]);var J=null;for(u in p)if(Object.prototype.hasOwnProperty.call(p,u)&&(o=k[u])){R=p[u];var N=[];for(r=0;r<R.length;r++)if(C=R[r],e=o.hot._acceptedDependencies[C]){if(-1!==N.indexOf(e))continue;N.push(e)}for(r=0;r<N.length;r++){e=N[r];try{e(R)}catch(t){i.onErrored&&i.onErrored({type:"accept-errored",moduleId:u,dependencyId:R[r],error:t}),i.ignoreErrored||J||(J=t)}}}for(r=0;r<O.length;r++){var G=O[r];u=G.module,n=[u];try{I(u)}catch(t){if("function"==typeof G.errorHandler)try{G.errorHandler(t)}catch(e){i.onErrored&&i.onErrored({type:"self-accept-error-handler-errored",moduleId:u,error:e,originalError:t}),i.ignoreErrored||J||(J=e),J||(J=t)}else i.onErrored&&i.onErrored({type:"self-accept-errored",moduleId:u,error:t}),i.ignoreErrored||J||(J=t)}}return J?(g("fail"),Promise.reject(J)):(g("idle"),new Promise(function(t){t(m)}))}var k={};function I(i){if(k[i])return k[i].exports;var e=k[i]={i:i,l:!1,exports:{},hot:c(i),parents:(o=n,n=[],o),children:[]};return t[i].call(e.exports,e,e.exports,u(i)),e.l=!0,e.exports}I.m=t,I.c=k,I.d=function(t,i,e){I.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},I.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},I.t=function(t,i){if(1&i&&(t=I(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(I.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var r in t)I.d(e,r,function(i){return t[i]}.bind(null,r));return e},I.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return I.d(i,"a",i),i},I.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},I.p="build/",I.h=function(){return s},u(4)(I.s=4)}([function(t,i,e){"use strict";function r(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}e.d(i,"a",function(){return a});var s=0,a=function(){function t(i){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.type="TCont";this.tCont="xz",this.object3d=new THREE.Object3D,this.object3d.tCont=this,this.children=[],this._parent=void 0,this._scale=1,this._x=0,this._y=0,this.uuid=s+"_"+Math.random(),s++,this.dragBigXZ=function(){},null!=i&&(null==i.tCont?i.add(this.object3d):(trace("obj3d"),trace(i),trace(this),i.object3d.add(this.object3d)))}var i,e,a;return i=t,(e=[{key:"add",value:function(t){if(null==t)return null;for(var i=0;i<this.children.length;i++)this.children[i].uuid==t&&(remove(this.children[i]),i=0);this.children.push(t),this.object3d.add(t.object3d),t.parent=this,t.testVisi()}},{key:"remove",value:function(t){if(null==t)return null;for(var i,e=0;e<this.children.length;e++)if(this.children[e].uuid==t.uuid)return(i=this.children.splice(e,1))[0].parent.object3d.remove(i[0].object3d),i[0].parent=void 0,i[0];return null}},{key:"x",set:function(t){this.object3d.position.x=t},get:function(){return this.object3d.position.x}},{key:"y",set:function(t){this.object3d.position.y=t},get:function(){return this.object3d.position.y}},{key:"scale",set:function(t){this._scale!=t&&(this._scale=t,this.object3d.scale(this._scale,1,this._scale))},get:function(){return this._scale}},{key:"parent",set:function(t){this._parent=t},get:function(){return this._parent}},{key:"alpha",set:function(t){this.parameter.alpha!=t&&(this.parameter.alpha=t,this.div.style.opacity=this.parameter.alpha)},get:function(){return this.parameter.alpha}},{key:"visible",set:function(t){this._visible!=t&&(this._visible=t,this.object3d.visible=this._visible)},get:function(){return this.parameter.visible}}])&&r(i.prototype,e),a&&r(i,a),t}()},function(t,i,e){"use strict";e.d(i,"c",function(){return p}),e.d(i,"b",function(){return f}),e.d(i,"a",function(){return y});var r,s=e(0);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function n(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,i,e){return i&&n(t.prototype,i),e&&n(t,e),t}function u(t,i){return!i||"object"!==a(i)&&"function"!=typeof i?c(t):i}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&g(t,i)}function g(t,i){return(g=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function p(t,i,e){this.type="TStyle";var s=this;r=this,this.div=t,this.fun=e,this.font=void 0,(new THREE.FontLoader).load(i,function(t){s.font=t,s.fun()}),this.gBox=new THREE.BoxBufferGeometry(1,1,1),this.gCylinder=new THREE.CylinderBufferGeometry(1,1,1,16,1),this.gStrelka=new THREE.CylinderBufferGeometry(1,0,1,16,1),this.wh=32,this._gage=.5,this._color="#008CBA",this._color1="#666666",this._colorText="#666666",this._colorText1="#999999",this._fontSize=16,this._fontFamily="Arial, Helvetica, sans-serif",this._otstup=2,this.c1Material=new THREE.MeshPhongMaterial({color:this._color1}),this.cTMaterial=new THREE.MeshPhongMaterial({color:this._colorText}),this.mobile=!1,this.array=[],this.add=function(t){this.array.push(t)}}Object.defineProperties(p.prototype,{});var f=function(t){function i(t,e,s,a){var n;h(this,i),(n=u(this,l(i).call(this,t))).x=e,n.y=s,n._size=18,n._width=100,n._gage=r._gage,n._colorText=r._colorText,n.cTMaterial=r.cTMaterial,n.mesh=void 0;var o=void 0;return n._text=a||"",n.drag=function(){null!=o&&o.dispose(),(o=new THREE.TextGeometry(this._text,{font:r.font,size:this._size,height:1,curveSegments:4,bevelEnabled:!0,bevelThickness:this._gage,bevelSize:1,bevelOffset:0,bevelSegments:5})).computeBoundingBox(),this._width=o.boundingBox.max.x-o.boundingBox.min.x,null==this.mesh?(this.mesh=new THREE.Mesh(o,this.cTMaterial),this.object3d.add(this.mesh)):this.mesh.geometry=o},n.drag(),n.dragMat=function(){0==this.boolMat&&(this.boolMat=!0,this.cTMaterial=new THREE.MeshPhongMaterial({color:this._color1}),this.mesh=this.cTMaterial);var t=new THREE.Color(this._colorText);this.cTMaterial.color=t},n}return d(i,s["a"]),o(i,[{key:"width",set:function(t){this._width!=t&&(this._width=t)},get:function(){return this._width}},{key:"gage",set:function(t){this._gage!=t&&(this._gage=t,this.drag())},get:function(){return this._gage}},{key:"size",set:function(t){this._size!=t&&(this._size=t,this.drag())},get:function(){return this._size}},{key:"text",set:function(t){this._text!=t&&(this._text=t,this.drag())},get:function(){return this._text}},{key:"colorText",set:function(t){this._colorText!=t&&(this._colorText=t,this.dragMat())},get:function(){return this._colorText}}]),i}(),y=function(t){function i(t,e,s){var a;h(this,i),(a=u(this,l(i).call(this,t))).x=e,a.y=s,a._height=10,a._width=100,a._gage=r._gage,a._color1=r._color1,a._otstup=r._otstup,a.boolMat=!1,a.c1Material=r.c1Material,a.a=[],a.a[0]=new THREE.Mesh(r.gCylinder,a.c1Material),a.a[1]=new THREE.Mesh(r.gCylinder,a.c1Material),a.a[2]=new THREE.Mesh(r.gCylinder,a.c1Material),a.a[3]=new THREE.Mesh(r.gStrelka,a.c1Material),a.a[4]=new THREE.Mesh(r.gStrelka,a.c1Material);for(var n=0;n<a.a.length;n++)a.object3d.add(a.a[n]);return a.a[0].rotation.z=Math.PI/2,a.a[3].rotation.z=-Math.PI/2,a.a[4].rotation.z=Math.PI/2,a.label=new f(c(c(a)),0,0,a._width+""),a.drag=function(){this.a[0].scale.set(this._gage,this._width-6*this._gage,this._gage),this.a[0].position.set(this._width/2,this._height,0),this.a[1].scale.set(this._gage,this._height+this._gage,this._gage),this.a[1].position.set(0,(this._height+this._gage)/2,0),this.a[2].scale.set(this._gage,this._height+this._gage,this._gage),this.a[2].position.set(this._width,(this._height+this._gage)/2,0),this.a[3].scale.set(4*this._gage,4*this._gage,this._gage),this.a[3].position.set(2*this._gage,this._height,0),this.a[4].scale.set(4*this._gage,4*this._gage,this._gage),this.a[4].position.set(this._width-2*this._gage,this._height,0),this.label.text=Math.round(10*this._width)/10+"",this.label.y=this._height+5,this.label.x=(this._width-this.label.width)/2},a.drag(),a.dragMat=function(){if(0==this.boolMat){this.boolMat=!0,this.c1Material=new THREE.MeshPhongMaterial({color:this._color1});for(var t=0;t<this.a.length;t++)this.a[t].material=this.c1Material}new THREE.Color(this._color1);this.c1Material.color=new THREE.Color(this._color1),this.label.colorText=this._color1},a}return d(i,s["a"]),o(i,[{key:"width",set:function(t){this._width!=t&&(this._width=t,this.drag())},get:function(){return this._width}},{key:"height",set:function(t){this._height!=t&&(this._height=t,this.drag())},get:function(){return this._height}},{key:"gage",set:function(t){this._gage!=t&&(this._gage=t,this.drag())},get:function(){return this._gage}},{key:"color1",set:function(t){this._color1!=t&&(this._color1=t,this.dragMat())},get:function(){return this._color1}}]),i}()},function(t,i,e){"use strict";e.d(i,"a",function(){return h});e(0);function r(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function s(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function a(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var h=function(){function t(){s(this,t);var i=this;this.type="TVector",this.time=0,this._wh=50,this._sah=2,this._zdvig=2,this._canvas,this.funUp=void 0,this._boolMat=!0,this.dinFun=void 0,this.bitmapData=new l(20,20,0,function(){i.upDate(),i.dinFun&&i.dinFun()}),this._canvas=this.bitmapData.canvas,this.bloks=new o(this),this.points=new n(this),this.setLink=function(t,e){i.dinFun=e,this.bitmapData.load(t,!0)},this.upDate=function(){var t=(new Date).getMilliseconds();this.bloks.upDate(),this.points.upDate(),this.time=(new Date).getMilliseconds()-t,null!=this.funUp&&this.funUp()}}var i,e,r;return i=t,(e=[{key:"canvas",set:function(t){this._canvas=t},get:function(){return this._canvas}},{key:"wh",set:function(t){this._wh!=Math.round(t)&&(this._wh=Math.round(t),this.upDate())},get:function(){return this._wh}},{key:"sah",set:function(t){this._sah!=t&&(this._sah=t,this.upDate())},get:function(){return this._sah}},{key:"zdvig",set:function(t){this._zdvig!=t&&(this._zdvig=t,this.upDate())},get:function(){return this._zdvig}},{key:"boolMat",set:function(t){this._boolMat!=t&&(this._boolMat=t,this.points._boolMat=t,this.upDate())},get:function(){return this._boolMat}}])&&a(i.prototype,e),r&&a(i,r),t}(),n=function t(i){s(this,t),this.par=i,this.array=[],this.arrayTriangle=[];var e=[],r=0;this._boolMat=!0,this.ts=new d,this.getP=function(){return r==e.length&&e.push({x:0,y:0}),e[++r-1]},this.clear=function(){this.array=[],this.arrayTriangle=[],this.ts.segment.width=2*this.par.wh,this.ts.segment.height=2*this.par.wh,r=0},this.upDate=function(){this.clear();for(var t=0;t<this.par.bloks.array.length;t++)for(var i=0;i<this.par.bloks.array[t].attIJBig.length;i++)this.startGron(this.par.bloks.array[t].attIJBig[i],this.par.bloks.array[t].i,this.par.bloks.array[t].j)},this.startGron=function(t,i,e){if(!(t.length<5)){for(var r,s=[],a=0;a<t.length;a+=2)(r=this.getP()).x=t[a],r.y=t[a+1],s.push(r);1==this._boolMat&&this.sGMat(s);for(a=0;a<s.length;a++)s[a].x+=i,s[a].y+=e;this.ts.arrPosition=[],this.ts.start(s);var h=[];for(a=0;a<this.ts.arrPosition.length;a+=9)h.push(this.ts.arrPosition[a],this.ts.arrPosition[a+1]),h.push(this.ts.arrPosition[a+3],this.ts.arrPosition[a+1+3]),h.push(this.ts.arrPosition[a+6],this.ts.arrPosition[a+1+6]);this.arrayTriangle.push(h),this.array.push(s)}},this.sGMat=function(t){for(var i=0;i<t.length-2;i++)this.sGMat2(t,i)};var a,h;this.sGMat2=function(t,i){if(!(this.getDistance(t[i],t[i+1])>10||Math.abs(this.getDistancePointToLine(t[i],t[i+2],t[i+1]))>1)){a=[];for(var e=0;e<100&&!((h=i+e+2)>=t.length-3);e++)if(a.push(h-1),1==this.sGMat3(t,t[i],a,t[h])){for(var r=a.length-2;r>=0;r--)t.splice(a[r],1);e=999999;break}}},this.sGMat3=function(t,i,e,r){for(var s=!1,a=0;a<e.length;a++)if(Math.abs(this.getDistancePointToLine(i,t[e[a]],r))>this.par._zdvig){s=!0;break}return s},this.getDistance=function(t,i){return null==t?0:(null==i&&(i=rezNull),i=i||rezNull,Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2)))},this.getDistancePointToLine=function(t,i,e){var r=((i.y-t.y)*e.x-(i.x-t.x)*e.y+i.x*t.y-i.y*t.x)/this.getDistance(t,i);return-(Number.isFinite(r)?r:0)}},o=function t(i){s(this,t),this.par=i,this.array=[],this.arrGron=[],this.arrGronMin=[];var e,r,a,h=i.bitmapData,n=0,o=0;this.clear=function(){this.array=[];for(var t=0;t<this.arrGron.length;t++)this.arrGron[t].clear()},this.getGron=function(t,i,e,r){return n==this.arrGron.length&&(this.arrGron.push(new u(this)),this.arrGron[n].idArr=n),this.arrGron[n].start(t,i,e,r),this.array.push(this.arrGron[n]),n++,this.arrGron[n-1]},this.getGMin=function(){return o==this.arrGronMin.length&&(this.arrGronMin.push(new c(this)),this.arrGronMin[o].idArr=o),o++,this.arrGronMin[o-1]},this.upDate=function(){var t,s;this.clear(),n=0,o=0,e=h.width,r=h.height,a=null;for(var u=0;u<e-i._wh;u+=i._wh){u+(t=i._wh+1)>=e-i._wh+1&&(t=e-u);for(var c=0;c<r-i._wh;c+=i._wh)c+(s=i._wh+1)>=r-i._wh+1&&(s=r-c),a=this.getGron(u,c,t,s)}null==a&&(a=this.getGron(0,0,e,r))}},u=function t(i){var e,a;s(this,t),this.par=i,this.idArr=-1,this.array=[],this.status=0,this.i,this.j,this.w,this.h;var h,n=i.par.bitmapData;this.clear=function(){0!=this.array.length&&(this.array=[])},this.start=function(t,e,r,s){this.i=t,this.j=e,this.w=r,this.h=s;for(var a=0;a<r;a++){this.array[a]=[];for(var o=0;o<s;o++)(h=i.getGMin()).start(a+t,o+e,n.getPixel(a+t,o+e)),this.array[a][o]=h}this.testSt(),1==this.status&&this.poisk()},this.testSt=function(){this.status=0,this.attIJBig=[];for(var t=0;t<this.w;t++)for(var i=0;i<this.h;i++)if(0!=this.array[t][i].suma){this.status=1,t=999,i=999;break}if(0!=this.status){for(this.status=2,t=0;t<this.w;t++)for(i=0;i<this.h;i++)if(0==this.array[t][i].suma){this.status=1,t=999,i=999;break}1!=this.status&&(this.attIJBig=[[0,0,this.w-1,0,this.w-1,this.h-1,0,this.h-1,0,0]])}};var o=0;this.attIJ=[],this.attIJ2=[],this.attIJBig=[],this.poisk=function(){if(this.poiskOpok(),this.attIJ=[],this.attIJBig=[],o=-1,this.poiskLine(),this.attIJBig.length>=2){this.slivanie();for(var t=this.attIJBig.length-1;t>=0;t--)this.attIJBig[t].length}},this.slivanie=function(){for(var t=0;t<this.attIJBig.length;t++)this.slivanieMa(this.attIJBig[t],t)},this.slivanieMa=function(t,i){if(t[1]-1>0&&0!=this.array[t[0]][t[1]-1].suma)for(var e=1;e<this.h;e++)if(t[1]-e>=0&&1==this.array[t[0]][t[1]-e].opor){var r=this.array[t[0]][t[1]-e].konur;if(-1!=r){for(var s=0;s<t.length;s++)this.attIJBig[r].push(t[s]);return this.attIJBig[i]=[],void this.rjynehNa(i,r)}}},this.rjynehNa=function(t,i){var e,r;for(e=0;e<this.w;e++)for(r=0;r<this.h;r++)this.array[e][r].konur==t&&(this.array[e][r].konur=i)};var u=(r(e={i:0,y:0,x:0},"y",0),r(e,"error",0),c=e),c=(r(a={i:0,y:0,x:0},"y",0),r(a,"error",0),a);this.poiskLine=function(){-1!=o&&this.attIJBig.push(this.attIJ),o++;for(var t=0;t<this.w;t++)for(var i=0;i<this.h;i++)if(0!=this.array[t][i].suma&&1==this.array[t][i].opor&&-1==this.array[t][i].proshli)return 0,0,this.poiskOFkonur2(t,i,o),this.array[t][i].proshli=5,this.attIJ=[],this.getPoisk(t,i),-999==c.i?(this.poiskLine(),!1):(this.attIJ.push(t,i),this.array[t][i].konur=o,this.attIJ2=[],this.attIJ2.push(t,i),u.i=1*c.i,u.j=1*c.j,u.x=1*c.x,u.y=1*c.y,u.error=0,this.poiskOF(c.i,c.j),!0);return!1},this.poiskOFkonur2=function(t,i,e){-1==this.array[t][i].proshli2&&(this.array[t][i].proshli2=1,this.getPoisk(t,i,"proshli2"),-999!=c.x&&(this.array[c.i][c.j].konur2=e,this.poiskOFkonur2(c.i,c.j,e)),this.getPoisk(t,i,"proshli2"),-999!=c.x&&(this.array[c.i][c.j].konur2=e,this.poiskOFkonur2(c.i,c.j,e)),0)},this.poiskOF=function(t,i){if(-999!=t)if(this.attIJ2.push(t,i),this.array[t][i].konur=o,this.array[t][i].proshli=1,this.getPoisk(t,i),-999!=c.x){var e=!1;c.x==u.x&&c.y==u.y&&(e=!0),this.array[t][i].oporNum>=3&&(u.error=999999999),0==e&&u.error++,1==this.array[c.i][c.j].oporSuper&&(u.error=999999999),u.error<this.par.par._sah?this.poiskOF(c.i,c.j):(this.array[c.i][c.j].proshli=4,u.i=1*c.i,u.j=1*c.j,u.x=1*c.x,u.y=1*c.y,u.error=0,this.attIJ.push(t,i),this.array[c.i][c.j].konur=o,this.poiskOF(c.i,c.j),this.array[t][i].proshli=4)}else this.testOdinokih()};var l,d,g,p,f,y,m,w;this.getPoisk=function(t,i,e){c.x=-999;var r=e||"proshli";w=0,m=-999,p=-999,g=-999,y=-999,f=-999;for(var s=-1;s<2;s++)if(-1!=(l=t+s)&&l<=this.w-1)for(var a=-1;a<2;a++)d=i+a,0==s&&0==a||-1!=d&&d<=this.h-1&&0!=this.array[l][d].suma&&1==this.array[l][d].opor&&-1==this.array[l][d][r]&&(w++,this.array[l][d].oporNum>m&&(m=this.array[l][d].oporNum,g=l,p=d,f=s,y=a));if(c.i=g,c.j=p,c.x=f,c.y=y,1==this.array[t][i].krai){if(t<this.w-1&&null!=this.array[t+1][i]&&0!=this.array[t+1][i].suma&&1==this.array[t+1][i].opor&&-1==this.array[t+1][i][r]&&this.array[t+1][i].oporNum>=m)return c.i=t+1,c.j=i,c.x=1,void(c.y=0);if(t>0&&null!=this.array[t-1][i]&&0!=this.array[t-1][i].suma&&1==this.array[t-1][i].opor&&-1==this.array[t-1][i][r]&&this.array[t-1][i].oporNum>=m)return c.i=t-1,c.j=i,c.x=-1,void(c.y=0);if(null!=this.array[t][i+1]&&0!=this.array[t][i+1].suma&&1==this.array[t][i+1].opor&&-1==this.array[t][i+1][r]&&this.array[t][i+1].oporNum>=m)return c.i=t,c.j=i+1,c.x=0,void(c.y=1);if(null!=this.array[t][i-1]&&0!=this.array[t][i-1].suma&&1==this.array[t][i-1].opor&&-1==this.array[t][i-1][r]&&this.array[t][i-1].oporNum>=m)return c.i=t,c.j=i-1,c.x=0,void(c.y=-1)}},this.testAll=function(){for(var t=-1,i=0,e=9999,r=-1,s=-1,a=Math.sqrt(Math.pow(1*this.attIJ[0]-u.i,2)+Math.pow(1*this.attIJ[1]-u.j,2)),h=0;h<this.w;h++)for(var n=0;n<this.h;n++)this.array[h][n].konur2==o&&(0,-1==this.array[h][n].proshli&&(t=Math.sqrt(Math.pow(u.i-h,2)+Math.pow(u.j-n,2)))<a&&(e>t&&(e=t,r=h,s=n),i++));return 0!=i&&(u.i=r,u.j=s,u.x=0,u.y=0,u.error=0,this.attIJ.push(r,s),this.array[r][s].konur=o,this.array[r][s].proshli=4,this.poiskOF(r,s),!0)},this.testOdinokih=function(){if(1!=this.testAll()){var t=0,i=0,e=!0;if(this.attIJ2.length>=5){e=!1;for(var r=2;r<this.attIJ2.length;r+=2)this.attIJ2[r]!=this.attIJ2[0]&&(t=1),this.attIJ2[r+1]!=this.attIJ2[1]&&(i=1);0==t&&(e=!0),0==i&&(e=!0)}if(1==e)for(r=0;r<this.attIJ2.length;r+=2)this.array[this.attIJ2[r]][this.attIJ2[r+1]].opor=!1,this.array[this.attIJ2[r]][this.attIJ2[r+1]].proshli=-1;else this.attIJ.push(1*this.attIJ[0],1*this.attIJ[1]);this.poiskLine()}},this.poiskOpok=function(){for(var t=-1,i=0;i<this.w;i++){t=-1;for(var e=0;e<this.h;e++)this.array[i][e].suma!=t&&(this.array[i][e].opor=!0,this.array[i][e].oporNum++,t=this.array[i][e].suma);t=-1;for(e=this.h-1;e>=0;e--)this.array[i][e].suma!=t&&(this.array[i][e].opor=!0,this.array[i][e].oporNum++,t=this.array[i][e].suma)}for(e=0;e<this.h;e++){t=-1;for(i=0;i<this.w;i++)this.array[i][e].suma!=t&&(this.array[i][e].opor=!0,this.array[i][e].oporNum++,t=this.array[i][e].suma)}for(e=0;e<this.h;e++){t=-1;for(i=this.w-1;i>=0;i--)this.array[i][e].suma!=t&&(this.array[i][e].opor=!0,this.array[i][e].oporNum++,t=this.array[i][e].suma)}for(e=0;e<this.h;e++)for(i=0;i<this.w;i++)0!=this.array[i][e].suma&&1==this.array[i][e].opor&&this.killOO(i,e);for(e=0;e<this.h;e++)t=-1,this.array[0][e].suma!=t&&(this.array[0][e].krai=!0,this.array[0][e].oporNum++),this.array[this.w-1][e].suma!=t&&(this.array[this.w-1][e].krai=!0,this.array[this.w-1][e].oporNum++);for(i=0;i<this.w;i++)t=-1,this.array[i][0].suma!=t&&(this.array[i][0].krai=!0,this.array[i][0].oporNum++),this.array[i][this.h-1].suma!=t&&(this.array[i][this.h-1].krai=!0,this.array[i][this.h-1].oporNum++);0!=this.array[0][0].suma&&(this.array[0][0].oporNum+=10),0!=this.array[this.w-1][0].suma&&(this.array[this.w-1][0].oporNum+=10),0!=this.array[this.w-1][this.h-1].suma&&(this.array[this.w-1][this.h-1].oporNum+=10),0!=this.array[0][this.h-1].suma&&(this.array[0][this.h-1].oporNum+=10),this.array[0][7].oporNum+=10,t=11;for(e=0;e<this.h;e++)this.array[0][e].suma;this.poiskOpokwwww()},this.poiskOpokwwww=function(){},this.killOO=function(t,i){this.getPoisk(t,i),1==w&&(this.array[t][i].suma=0,this.array[t][i].opor=!1)}},c=function t(i){s(this,t),this.par=i,this.idArr=-1,this.startColor,this.a,this.i,this.j,this.suma=0,this.opor=!1,this.oporSuper=!1,this.proshli=-1,this.oporNum=0,this.krai=!1,this.konur=-1,this.konur2=-1,this.proshli2=-1,this.start=function(t,i,e){this.suma=0,this.opor=!1,this.oporSuper=!1,this.proshli=-1,this.krai=!1,this.konur2=-1,this.proshli2=-1,this.i=t,this.j=i,this.oporNum=0,e[3]>200&&(this.suma=1)}};function l(t,i,e,r){var s=this;this.type="TBitmapData",this.fun=r,this._width=null!=t?t:100,this._height=null!=i?i:100,this._color=null!=e?e:[0,0,0,0],this._widthVisi=100,this._heightVisi=100,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.load=function(t,i){var e=new Image;e.crossOrigin="Anonymous",e.onload=function(){s.width=e.width,s.height=e.height,i&&s.clear(),s.ctx.drawImage(e,0,0),s.imgData=s.ctx.getImageData(0,0,s.width,s.height),s.fun&&s.fun()},e.src=t},this.setCanvas=function(t,i){s.canvas=t,s.ctx=i,s.imgData=s.ctx.getImageData(0,0,s.canvas.width,s.canvas.height),s.upDate()},this.setImage=function(t){this._width=t.width,this._height=t.height,this.canvas.width=this._width,this.canvas.height=this._height,this.ctx.clearRect(0,0,this._width,this._width),this.ctx.drawImage(t,0,0),this.imgData=this.ctx.getImageData(0,0,t.width,t.height)},this.setImage2=function(t,i){this._width=t.width,this._height=t.height,this.canvas.width=this._width*i,this.canvas.height=this._height*i,this.ctx.clearRect(0,0,this._width,this._width),this.ctx.drawImage(t,0,0,this._width,this._height,0,0,this._width*i,this._height*i),this.imgData=this.ctx.getImageData(0,0,t.width,t.height)},this.getData=function(){return this.canvas.toDataURL()},this.arrRgba=[0,0,0,0],this.getPixel=function(t,i){return this.arrRgba[0]=this.imgData.data[4*(i*this.imgData.width+t)+0],this.arrRgba[1]=this.imgData.data[4*(i*this.imgData.width+t)+1],this.arrRgba[2]=this.imgData.data[4*(i*this.imgData.width+t)+2],this.arrRgba[3]=this.imgData.data[4*(i*this.imgData.width+t)+3],this.arrRgba[0]=this.arrRgba[0]?this.arrRgba[0]:0,this.arrRgba[1]=this.arrRgba[1]?this.arrRgba[1]:0,this.arrRgba[2]=this.arrRgba[2]?this.arrRgba[2]:0,this.arrRgba[3]=this.arrRgba[3]?this.arrRgba[3]:0,this.arrRgba},this.getAlphaPixel=function(t,i){return this.getPixel(t,i)[3]},this.setPixelDin=function(t,i,e){var r=this.ctx.createImageData(1,1);r.data[0]=e[0],r.data[1]=e[1],r.data[2]=e[2],r.data[3]=e[3],this.ctx.putImageData(r,t,i)},this.setPixel=function(t,i,e){this.imgData.data[4*(i*this.imgData.width+t)+0]=e[0],this.imgData.data[4*(i*this.imgData.width+t)+1]=e[1],this.imgData.data[4*(i*this.imgData.width+t)+2]=e[2],this.imgData.data[4*(i*this.imgData.width+t)+3]=e[3]},this.addPixel=function(t,i,e){this.setPixel(t,i,this.blendColors(this.getPixel(t,i),e))},this.addImgData=function(t,i,e,r,s,a,h,n,o){for(var u={imgData:t,arrRgba:[]},c=0,l=0,d=i;d<r;d++){for(var g=e;g<s;g++){var p=this.getPixel.call(u,d,g);this.addPixel(a+c,h+l,p),l++}l=0,c++}},this.addBitmapData=function(t,i,e,r,s,a,h,n,o){1==arguments.length?(i=e=0,r=t.imgData.width,s=t.imgData.height,a=h=0):3==arguments.length?(a=i,h=e,i=e=0,r=t.imgData.width,s=t.imgData.height):9==arguments.length?console.warn("todo dWidth, dHeight"):console.error("не правильные аргументы",arguments.length),this.addImgData(t.imgData,i,e,r,s,a,h)},this.upDate=function(){this.ctx.putImageData(this.imgData,0,0)},this.changeWH=function(t,i){var e=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height);this.canvas.width=null!=t?t:this._width,this.canvas.height=null!=i?i:this._height,this.clear(),this.ctx.putImageData(e,0,0),this.imgData=this.ctx.getImageData(0,0,this._width,this._height),this.widthVisi=this._widthVisi,this.heightVisi=this._heightVisi},this.setColor=function(t){t||(t=this._color),this.ctx.fillStyle="rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]/255+")"},this.setPixelTempData=function(t,i,e){this.tempData.data[4*(i*this.tempWidth+t)+0]=e[0],this.tempData.data[4*(i*this.tempWidth+t)+1]=e[1],this.tempData.data[4*(i*this.tempWidth+t)+2]=e[2],this.tempData.data[4*(i*this.tempWidth+t)+3]=e[3]},this.tempData=[],this.tempWidth=100;var a,h,n=1,o=1;this.compress=function(t,i,e){t=Math.round(t),i=Math.round(i),t>this._width&&(t=this._width),i>this._height&&(i=this._height),n=this._width/t,o=this._height/i,n-=n%1,o-=o%1,this.tempWidth=t,this.tempData=this.ctx.createImageData(t,i),a=(this._width+2)/t,h=(this._height+2)/i;for(var r=0;r<t;r++)for(var s=0;s<i;s++)this.setPixelTempData(r,s,this.getPixelMerge(Math.round(r*a),Math.round(s*h)));this.width=t,this.height=i,this.imgData=this.tempData,this.upDate(),e&&e(this)},this.getPixelMerge=function(t,i){var e=this.getPixel(t,i);this.tempPixel[0]=e[0],this.tempPixel[1]=e[1],this.tempPixel[2]=e[2],this.tempPixel[3]=e[3];for(var r,s=1,a=1,h=0;h<n;h++)t+(h+1)<this._width?(r=this.getPixel(t+(h+1),i),this.tempPixel[0]+=r[0]*a,this.tempPixel[1]+=r[1]*a,this.tempPixel[2]+=r[2]*a,this.tempPixel[3]+=r[3]*a,s++):(this.tempPixel[0]+=e[0]*a,this.tempPixel[1]+=e[1]*a,this.tempPixel[2]+=e[2]*a,this.tempPixel[3]+=e[3]*a,s++),t-(h+1)>0?(r=this.getPixel(t-(h+1),i),this.tempPixel[0]+=r[0]*a,this.tempPixel[1]+=r[1]*a,this.tempPixel[2]+=r[2]*a,this.tempPixel[3]+=r[3]*a,s++):(this.tempPixel[0]+=e[0]*a,this.tempPixel[1]+=e[1]*a,this.tempPixel[2]+=e[2]*a,this.tempPixel[3]+=e[3]*a,s++);a=1;for(var u=0;u<o;u++)i+(u+1)<this._height?(r=this.getPixel(t,i+(u+1)),this.tempPixel[0]+=r[0]*a,this.tempPixel[1]+=r[1]*a,this.tempPixel[2]+=r[2]*a,this.tempPixel[3]+=r[3]*a,s++):(this.tempPixel[0]+=e[0]*a,this.tempPixel[1]+=e[1]*a,this.tempPixel[2]+=e[2]*a,this.tempPixel[3]+=e[3]*a,s++),i-(u+1)>0?(r=this.getPixel(t,i-(u+1)),this.tempPixel[0]+=r[0]*a,this.tempPixel[1]+=r[1]*a,this.tempPixel[2]+=r[2]*a,this.tempPixel[3]+=r[3]*a,s++):(this.tempPixel[0]+=e[0]*a,this.tempPixel[1]+=e[1]*a,this.tempPixel[2]+=e[2]*a,this.tempPixel[3]+=e[3]*a,s++);return this.tempPixel[0]=this.tempPixel[0]/s,this.tempPixel[1]=this.tempPixel[1]/s,this.tempPixel[2]=this.tempPixel[2]/s,this.tempPixel[3]=this.tempPixel[3]/s,this.tempPixel},this.tempPixel=[],this.clear=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.imgData=this.ctx.getImageData(0,0,1,1)},this.width=this._width,this.height=this._height,this.setColor(),this.ctx.fillRect(0,0,this._width,this._height),this.imgData=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),this.changeWH(),this.blendColors=function(){for(var t=[],i=0;i<arguments.length;i++)t.push(arguments[i]);for(var e,r,s,a,h=[0,0,0,0];r=t.shift();)void 0===r[3]&&(r[3]=255),s=r[3]/255,(a=h[3]/255)&&s?((e=[0,0,0,0])[3]=1-(1-s)*(1-a),e[0]=Math.round(r[0]*s/e[3]+h[0]*a*(1-s)/e[3]),e[1]=Math.round(r[1]*s/e[3]+h[1]*a*(1-s)/e[3]),e[2]=Math.round(r[2]*s/e[3]+h[2]*a*(1-s)/e[3])):e=s?r:h,h=e;return e[3]=255*e[3],e}}function d(){var t=this;this.segment={x:.5,y:.5,width:100,height:100,rotation:0},this.arrPoint=[],this.arrTriangle=[],this.arrTriangleBig=[],this.arrPosition=[],this.arrUV=[],this.lengthUV=0,this.lengthPosition=0,this.lengthTriangle=0,this.centerShape=new g,this.areaShape=0,this._bound={min:new g,max:new g,center:new g};var i,e,r,s,a,h,n,o,u,c,l,d,p,f,y=new g,m=new g,w=[0,0,this.segment.width,this.segment.height],x=[new g,new g,new g,new g,new g,new g,new g,new g,new g],v=0,_=new g;function b(i,e){return t.getAngle(t._bound.center,i)-t.getAngle(t._bound.center,e)}this.start=function(i){t.lengthUV=0,t.lengthTriangle=0,t.lengthPosition=0;for(var e=[],r=0;r<i.length;r++)e.push(new g(i[r].x,i[r].y));if(0!==this.segment.rotation)for(r=0;r<e.length;r++)t.rotationPoint(e[r],-this.segment.rotation);if(t.arrPoint=e,t.areaShape=t.area(t.arrPoint),t.areaShape){t.getCenterShape();for(r=0;r<t.arrTriangleBig.length;r++)t.segmentationTriangle(t.arrTriangleBig[r]);if(0!==this.segment.rotation){var s=new g;for(r=0;r<t.arrPosition.length;r+=3)s.set(t.arrPosition[r],t.arrPosition[r+1]),t.rotationPoint(s,this.segment.rotation),t.arrPosition[r]=s.x,t.arrPosition[r+1]=s.y}}},this.getCenterShape=function(i){t.arrPoint=i||t.arrPoint,t.arrTriangleBig.length=0,t.arrTriangleBig=t.triangulate(t.arrPoint),t.updateCenterShape()},this.updateCenterShape=function(){var i=0,e=0;t.centerShape.set(0,0);var r=t.convex(t.arrPoint);if(0===r||-1===r)for(var s=0;s<t.arrTriangleBig.length;s++)i<(e=t.area(t.arrTriangleBig[s]))&&(i=e,t.centerShape.x=(t.arrTriangleBig[s][0].x+t.arrTriangleBig[s][1].x+t.arrTriangleBig[s][2].x)/3,t.centerShape.y=(t.arrTriangleBig[s][0].y+t.arrTriangleBig[s][1].y+t.arrTriangleBig[s][2].y)/3);else{for(s=0;s<t.arrPoint.length;s++)t.centerShape.x+=t.arrPoint[s].x,t.centerShape.y+=t.arrPoint[s].y;t.centerShape.x/=t.arrPoint.length,t.centerShape.y/=t.arrPoint.length}},this.segmentationTriangle=function(i){r=this.getBound(this.arrPoint),s=(r.min.x-r.min.x%this.segment.width-2*this.segment.width||0)+this.segment.x*this.segment.width,a=(r.min.y-r.min.y%this.segment.height-2*this.segment.height||0)+this.segment.y*this.segment.height,h=(r.max.x-r.max.x%this.segment.width+2*this.segment.width||500)+this.segment.x*this.segment.width,n=(r.max.y-r.max.y%this.segment.height+2*this.segment.height||500)+this.segment.y*this.segment.height,w[2]=this.segment.width,w[3]=this.segment.height;for(var o=s;o<h;o+=this.segment.width)for(var u=a;u<n;u+=this.segment.height){w[0]=o,w[1]=u,e=t.triangulate(t.getArrPointTriangleSegment(i,w),!1);for(var c=0;c<e.length;c++){t.arrTriangle[t.lengthTriangle++]=e[c];for(var l=0;l<e[c].length;l++)t.generatePointUV(e[c][l],w),t.arrPosition[t.lengthPosition++]=e[c][l].x,t.arrPosition[t.lengthPosition++]=e[c][l].y,t.arrPosition[t.lengthPosition++]=0}}},this.getArrPointTriangleSegment=function(e,r){for(var s=x,a=0;a<s.length;a++)s[a].x=s[a].y=1/0;v=0;for(a=0;a<3;++a)y.x=r[0],y.y=r[1],m.x=r[0]+r[2],m.y=r[1],(i=t.getPointOfIntersection(y,m,e[a],e[(a+1)%3]))&&(t.inArr(s,i)||s[v++].setPoint(i)),y.x=r[0]+r[2],y.y=r[1],m.x=r[0]+r[2],m.y=r[1]+r[3],(i=t.getPointOfIntersection(y,m,e[a],e[(a+1)%3]))&&(t.inArr(s,i)||s[v++].setPoint(i)),y.x=r[0]+r[2],y.y=r[1]+r[3],m.x=r[0],m.y=r[1]+r[3],(i=t.getPointOfIntersection(y,m,e[a],e[(a+1)%3]))&&(t.inArr(s,i)||s[v++].setPoint(i)),y.x=r[0],y.y=r[1],m.x=r[0],m.y=r[1]+r[3],(i=t.getPointOfIntersection(y,m,e[a],e[(a+1)%3]))&&(t.inArr(s,i)||s[v++].setPoint(i)),y.x=r[0],y.y=r[1],m.x=r[0]+r[2],m.y=r[1]+r[3],t.pointInSegment(e[a],y,m)&&(t.inArr(s,e[a])||s[v++].setPoint(e[a]));return y.x=r[0],y.y=r[1],t.isInTriangle(e[0],e[1],e[2],y)&&(t.inArr(s,y)||s[v++].setPoint(y)),y.x=r[0]+r[2],y.y=r[1],t.isInTriangle(e[0],e[1],e[2],y)&&(t.inArr(s,y)||s[v++].setPoint(y)),y.x=r[0]+r[2],y.y=r[1]+r[3],t.isInTriangle(e[0],e[1],e[2],y)&&(t.inArr(s,y)||s[v++].setPoint(y)),y.x=r[0],y.y=r[1]+r[3],t.isInTriangle(e[0],e[1],e[2],y)&&(t.inArr(s,y)||s[v++].setPoint(y)),s=s.slice(0,v),t.getBound(s),s.sort(b),s},this.inArr=function(t,i){for(var e=0;e<t.length;++e)if(t[e].x===i.x&&t[e].y===i.y)return!0;return!1},this.getBound=function(t){this._bound.min.set(999999,999999),this._bound.max.set(-999999,-999999);for(var i=0;i<t.length;i++)this._bound.min.x=Math.min(this._bound.min.x,t[i].x),this._bound.max.x=Math.max(this._bound.max.x,t[i].x),this._bound.min.y=Math.min(this._bound.min.y,t[i].y),this._bound.max.y=Math.max(this._bound.max.y,t[i].y);return this._bound.center.set(this._bound.max.x/2+this._bound.min.x/2,this._bound.max.y/2+this._bound.min.y/2),this._bound},this.pointInSegment=function(t,i,e){return i.x<=t.x&&t.x<=e.x&&i.y<=t.y&&t.y<=e.y},this.generatePointUV=function(i,e){i.x===e[0]?_.x=0:i.x===e[0]+e[2]?_.x=1:_.x=(i.x-e[0])%t.segment.width/t.segment.width,i.y===e[1]?_.y=0:i.y===e[1]+e[3]?_.y=1:_.y=(i.y-e[1])%t.segment.height/t.segment.height,t.arrUV[t.lengthUV++]=_.x,t.arrUV[t.lengthUV++]=_.y},this.convex=function(t){var i,e,r,s,a=t.length,h=0;if(a<3)return 0;for(i=0;i<a;i++)if(r=(i+2)%a,s=(t[e=(i+1)%a].x-t[i].x)*(t[r].y-t[e].y),(s-=(t[e].y-t[i].y)*(t[r].x-t[e].x))<0?h|=1:s>0&&(h|=2),3===h)return-1;return 0!=h?1:0},this.area=function(t){for(var i=t.length,e=0,r=i-1,s=0;s<i;r=s++)e+=t[r].x*t[s].y-t[s].x*t[r].y;return.5*e},this.snip=function(t,i,e,r,s,a){var h,n,o,u,c,l,d,g,p,f,y,m,w,x,v,_,b;if(n=t[a[i]].x,o=t[a[i]].y,u=t[a[e]].x,c=t[a[e]].y,l=t[a[r]].x,d=t[a[r]].y,Number.EPSILON>(u-n)*(d-o)-(c-o)*(l-n))return!1;for(f=l-u,y=d-c,m=n-l,w=o-d,x=u-n,v=c-o,h=0;h<s;h++)if(g=t[a[h]].x,p=t[a[h]].y,!(g===n&&p===o||g===u&&p===c||g===l&&p===d)&&(_=x*(p-o)-v*(g-n),b=m*(p-d)-w*(g-l),f*(p-c)-y*(g-u)>=-Number.EPSILON&&b>=-Number.EPSILON&&_>=-Number.EPSILON))return!1;return!0},this.triangulate=function(i,e){var r=i.length;if(r<3)return[];var s,a,h,n=[],o=[],u=[];if(t.area(i)>0)for(a=0;a<r;a++)o[a]=a;else for(a=0;a<r;a++)o[a]=r-1-a;var c=r,l=2*c;for(a=c-1;c>2;){if(l--<=0)return e?u:n;if(c<=(s=a)&&(s=0),c<=(a=s+1)&&(a=0),c<=(h=a+1)&&(h=0),t.snip(i,s,a,h,c,o)){var d,g,p,f,y;for(d=o[s],g=o[a],p=o[h],n.push([i[d],i[g],i[p]]),u.push([o[s],o[a],o[h]]),f=a,y=a+1;y<c;f++,y++)o[f]=o[y];l=2*--c}}return e?u:n},this.getAngle=function(t,i){return i=i||rezNull,t=t||rezNull,Math.atan2(i.y-t.y,i.x-t.x)},this.rotationPoint=function(t,i,e){var r=0,s=0;e?(r=e.x+(t.x-e.x)*Math.cos(i)-(t.y-e.y)*Math.sin(i),s=e.y+(t.y-e.y)*Math.cos(i)+(t.x-e.x)*Math.sin(i)):(r=t.x*Math.cos(i)-t.y*Math.sin(i),s=t.y*Math.cos(i)+t.x*Math.sin(i)),t.x=r,t.y=s},this.isInTriangle=function(t,i,e,r){var s=(t.x-r.x)*(i.y-t.y)-(i.x-t.x)*(t.y-r.y),a=(i.x-r.x)*(e.y-i.y)-(e.x-i.x)*(i.y-r.y),h=(e.x-r.x)*(t.y-e.y)-(t.x-e.x)*(e.y-r.y);return s>=0&&a>=0&&h>=0||s<=0&&a<=0&&h<=0};var P=new THREE.Vector2(0,0);this.getPointOfIntersection=function(t,i,e,r){return o=(t.x-i.x)*(r.y-e.y)-(t.y-i.y)*(r.x-e.x),u=(t.x-e.x)*(r.y-e.y)-(t.y-e.y)*(r.x-e.x),c=(t.x-i.x)*(t.y-e.y)-(t.y-i.y)*(t.x-e.x),d=c/o,(l=u/o)>=0&&l<=1&&d>=0&&d<=1?(p=t.x+l*(i.x-t.x),f=t.y+l*(i.y-t.y),P.x=p,P.y=f,P):null}}function g(t,i){this.x=t,this.y=i}Object.defineProperties(l.prototype,{width:{set:function(t){var i=this._width;this._width=t,this.changeWH(),i<this._width&&(this.setColor(),this.ctx.fillRect(i,0,this._width,this._height)),this.widthVisi=this._widthVisi},get:function(){return this._width}},height:{set:function(t){var i=this._height;this._height=t,this.changeWH(),i<this._height&&(this.setColor(),this.ctx.fillRect(0,i,this._width,this._height)),this.heightVisi=this._heightVisi},get:function(){return this._height}},widthVisi:{set:function(t){this._widthVisi=t},get:function(){return this._widthVisi}},heightVisi:{set:function(t){this._heightVisi=t},get:function(){return this._heightVisi}}}),g.prototype.set=function(t,i){this.x=t,this.y=i},g.prototype.setPoint=function(t){this.x=t.x,this.y=t.y}},function(t,i,e){"use strict";e.d(i,"a",function(){return r});var r=function t(i){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t);var e,r,a=this;this.tv=i,this.otstup=1,this.content=new PIXI.Container,this.dCont=new DCont(document.body),this.graphics=new PIXI.Graphics,this.content.addChild(this.graphics),this.geometriXZ=new s;var h=new THREE.MeshPhongMaterial({color:16777215});this.mesh=new THREE.Mesh(this.geometriXZ,h);var n=new THREE.Object3D;n.add(this.mesh),n.rotation.x=Math.PI,scene.add(n);for(var o=0;o<6;o++){var u;(u=new DButton(this.dCont,204+34*o,2," ",function(){a.setLink("resources/pic/"+this.idArr+".png")},"resources/pic/"+o+".png")).idArr=o,u.width=u.height}(u=new DButton(this.dCont,2,2,"Load PNG/alpha ",function(t){a.setLink(t)})).width=200,u.startFile(".png");var c=new DLabel(this.dCont,450,10);c.width=222,new DParamObject(this.dCont,2,130,function(){}).addObject(i),this.setLink=function(t){i.setLink(t,function(){a.drawWH(i.bitmapData.width*a.otstup,i.bitmapData.height*a.otstup)})},i.funUp=function(){a.draw()},this.panel=new DPanel(this.dCont,204,36),this.dC=new DCont(this.dCont),this.dC.x=204,this.dC.y=36,this.dC.div.appendChild(i._canvas),this.dB=function(t){a.chak.value=t,a.otstup=1==t?3:1,a.draw(),a.drawWH(i.bitmapData.width*a.otstup,i.bitmapData.height*a.otstup)},this.chak=new DCheckBox(this.dCont,2,40,"bigDebag",function(){a.dB(this.value)}),this.chak.value=!1;var l=!0;this.chak1=new DCheckBox(this.dCont,2,70,"debag",function(){l=this.value,a.draw()}),this.chak1.value=l,this.chak2=new DCheckBox(this.dCont,2,100,"mouseWipeOff",function(){}),this.textArea=new DTextArea(this.dCont,2,352,"mouseWipeOff",function(){}),this.textArea.width=200,this.textArea.height=600,this.textArea.fontSize=10,this.lll=new DLabel(this.dCont,2,332,"arrayTriangle"),this.lll.width=200;var d,g,p,f=2;this.draw=function(){if(c.text="timeLogic: "+Math.round(1e3*i.time)/1e3+" s.",this.graphics.clear(),0!=l){var t,s,h=i.bloks.array;if(d=this.otstup,f=0,this.panel.width=i.bitmapData.width,this.panel.height=i.bitmapData.height,this.graphics.lineStyle(.2,0,.2),3==a.otstup)for(var n=0;n<h.length;n++){t=h[n].i*d,s=h[n].j*d,0!=h[n].i&&(t=h[n].i*d+f*Math.round(h[n].i/i.wh)),0!=h[n].j&&(s=h[n].j*d+f*Math.round(h[n].j/i.wh)),this.graphics.lineStyle(.2,0,.2),0==h[n].status&&this.graphics.beginFill(16711680,.2),1==h[n].status&&this.graphics.beginFill(65280,.2),2==h[n].status&&this.graphics.beginFill(255,.2),this.graphics.drawRect(t,s,h[n].w*d,h[n].h*d);for(var o=0;o<h[n].array.length;o++)for(var u=0;u<h[n].array[o].length;u++)this.drawMin(h[n].i,h[n].j,h[n].array[o][u],d);this.drawLine(h[n].i,h[n].j,h[n],d)}for(n=0;n<i.points.array.length;n++)this.drawPoint(i.points.array[n],d);clearTimeout(p),g=0;for(n=0;n<i.points.arrayTriangle.length;n++)this.drawTriangleCC(i.points.arrayTriangle[n]);this.geometriXZ.start(i.points.arrayTriangle),this.mesh.position.y=-i.bitmapData.height/2,this.mesh.position.x=-i.bitmapData.width/2,e.render(r),this.textArea.text=JSON.stringify(i.points.arrayTriangle),this.lll.text="arrayTriangle : "+g}else e.render(r)},this.drawTriangle=function(t,i){if(!(i>=t.length)){trace(i),a.graphics.clear(),a.graphics.lineStyle(.5,0,0);for(var s=0;s<i+6;s+=6)a.graphics.beginFill(16777215*Math.random(),.6),a.graphics.moveTo(t[s+0]*d,t[s+1]*d),a.graphics.lineTo(t[s+2]*d,t[s+3]*d),a.graphics.lineTo(t[s+4]*d,t[s+5]*d),a.graphics.lineTo(t[s+0]*d,t[s+1]*d);e.render(r),p=setTimeout(function(){a.drawTriangle(t,i+6)},300)}},this.drawTriangleCC=function(t){a.graphics.lineStyle(.5,0,0);for(var i=0;i<t.length;i+=6)a.graphics.beginFill(16777215*Math.random(),.6),a.graphics.moveTo(t[i+0]*d,t[i+1]*d),a.graphics.lineTo(t[i+2]*d,t[i+3]*d),a.graphics.lineTo(t[i+4]*d,t[i+5]*d),a.graphics.lineTo(t[i+0]*d,t[i+1]*d),g++},this.drawPoint=function(t,i){this.graphics.lineStyle(2,16711680,.7),this.graphics.beginFill(0,0),this.xxx=0,this.graphics.moveTo(t[0].x*i+this.xxx,t[0].y*i+this.xxx);for(var e=1;e<t.length;e++)this.graphics.lineTo(t[e].x*i+this.xxx,t[e].y*i+this.xxx)},this.drawLine=function(t,e,r,s){var a=0;0!=t&&(a=t*s+f*Math.round(t/i.wh));var h=0;0!=e&&(h=e*s+f*Math.round(e/i.wh)),this.graphics.lineStyle(1,0,.5),this.graphics.beginFill(0,0);for(t=0;t<r.attIJBig.length;t++)for(e=0;e<r.attIJBig[t].length-2;e+=2)this.graphics.moveTo(r.attIJBig[t][e]*s+a,r.attIJBig[t][e+1]*s+h),this.graphics.lineTo(r.attIJBig[t][e+2]*s+a,r.attIJBig[t][e+3]*s+h)},this.drawMin=function(t,e,r,s){var a=0;0!=t&&(a=f*Math.round(t/i.wh));var h=0;0!=e&&(h=f*Math.round(e/i.wh)),0!=r.suma&&(this.graphics.beginFill(0,.02),this.graphics.drawRect(r.i*s+a,r.j*s+h,s,s),1==r.opor&&(this.graphics.beginFill(16711680,.1),this.graphics.drawRect(r.i*s+a,r.j*s+h,s,s)),-1!=r.proshli&&(this.graphics.beginFill(65280,.7),5==r.proshli&&this.graphics.beginFill(16711680,.7),2==r.proshli&&this.graphics.beginFill(255,.2),1==r.proshli&&this.graphics.beginFill(255,.1),this.graphics.drawRect(r.i*s+a,r.j*s+h,s,s)))},a.setLink("resources/pic/0.png"),this.drawWH=function(t,i){var s=e.resolution;e.view.style.width=t+"px",e.view.style.height=i+"px",e.resolution=1,e.resize(t,i),e.resolution=s,e.render(r)},(e=new PIXI.autoDetectRenderer(300,300,{antialias:!0,transparent:!0,preserveDrawingBuffer:!0})).view.style.position="fixed",e.view.style.left="204px",e.view.style.top="36px",a.dCont.div.appendChild(e.view),(r=new PIXI.Container).addChild(a.content),this.drav=function(t,e){var r,s,h=[0,0,0,255];1==a.chak2.value&&(h=[0,0,0,0]);for(var n=0;n<10;n++)if((r=Math.round(n-5+t))>=0&&r<i.bitmapData.width)for(var o=0;o<10;o++)(s=Math.round(o-5+e))>=0&&s<i.bitmapData.height&&i.bitmapData.setPixel(r,s,h);i.bitmapData.upDate()},this.move=function(t){a.drav(t.offsetX,t.offsetY)},this.up=function(t){e.view.removeEventListener("mousemove",a.move),document.removeEventListener("mouseup",a.up),i.upDate()},e.view.addEventListener("mousedown",function(t){a.drav(t.offsetX,t.offsetY),e.view.addEventListener("mousemove",a.move),document.addEventListener("mouseup",a.up)})};function s(){THREE.BufferGeometry.call(this),this.type="GeometriXZ";var t;this.arrPosition=[],this.start=function(t){this.arrPosition=[];for(var i=0;i<t.length;i++)for(var e=0;e<t[i].length;e+=6)this.srerrrr(t[i][e+4],t[i][e+1+4],t[i][e+2],t[i][e+1+2]),this.srerrrr(t[i][e+2],t[i][e+1+2],t[i][e],t[i][e+1]),this.srerrrr(t[i][e],t[i][e+1],t[i][e+4],t[i][e+1+4]);this.update()},this.srerrrr=function(t,i,e,r){for(var s=.5,a=0;a<50;a++)this.arrPosition.push(t+Math.random()*s-.25,i+Math.random()*s-.25,0),this.arrPosition.push(t+Math.random()*s-.25,i+Math.random()*s-.25,0),this.arrPosition.push(e+Math.random()*s-.25,r+Math.random()*s-.25,0);for(a=0;a<50;a++)this.arrPosition.push(t+Math.random()*s-.25,i+Math.random()*s-.25,0),this.arrPosition.push(e+Math.random()*s-.25,r+Math.random()*s-.25,0),this.arrPosition.push(e+Math.random()*s-.25,r+Math.random()*s-.25,0)},this.update=function(){t=new Float32Array(3*this.arrPosition.length),this.addAttribute("position",new THREE.BufferAttribute(t,3));for(var i=0;i<this.arrPosition.length;i++)t[i]=this.arrPosition[i];this.attributes.position.needsUpdate=!0},this.update()}s.prototype=Object.create(THREE.BufferGeometry.prototype),s.prototype.constructor=s},function(t,i,e){"use strict";e.r(i),function(t){var r=e(0);e.d(i,"TCont",function(){return r.a});var s=e(1);e.d(i,"TStyle",function(){return s.c}),e.d(i,"TArrow",function(){return s.a}),e.d(i,"TLabel",function(){return s.b});var a=e(2);e.d(i,"TVector",function(){return a.a});var h=e(3);e.d(i,"TVectorDebag",function(){return h.a}),t.TStyle=s.c,t.TCont=r.a,t.TArrow=s.a,t.TLabel=s.b,t.TVector=a.a,t.TVectorDebag=h.a}.call(this,e(5))},function(t,i){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e}]);